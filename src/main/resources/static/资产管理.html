<!DOCTYPE html>
<html lang="zh-CN">
<head>
<style>
/* 立即隐藏CMDB菜单项 - 防止闪烁 */
.nav-cmdb { display: none !important; }
.sidebar-item[data-page="CMDB"] { display: none !important; }
</style>
<script>
// 立即执行：尽早隐藏CMDB，防止闪烁
(function() {
    function hideCMDB() {
        var items = document.querySelectorAll('.sidebar-item');
        items.forEach(function(item) {
            var span = item.querySelector('span');
            if (span && span.textContent.trim() === 'CMDB') {
                item.style.display = 'none';
                item.setAttribute('data-hidden', 'true');
            }
        });
    }
    
    // 立即执行
    hideCMDB();
    
    // DOM Ready时再执行一次
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', hideCMDB);
    }
    
    // 额外保险：延迟执行确保覆盖所有情况
    setTimeout(hideCMDB, 10);
    setTimeout(hideCMDB, 100);
})();
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>资产管理 - 人工智能运维平台</title>
    <link rel="stylesheet" href="libs/fontawesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="资产管理.css">
    <script src="chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- 侧边栏 -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>人工智能运维平台</h2>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-tachometer-alt"></i>
                <span>总览</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-eye"></i>
                <span>视图</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-bell"></i>
                <span>告警中心</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-server"></i>
                <span>设备管理</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-network-wired"></i>
                <span>网络拓扑</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-chart-line"></i>
                <span>统计报表</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-tools"></i>
                <span>运维工具</span>
            </div>
            <div class="sidebar-divider"></div>
            <div class="sidebar-group-title">拓展中心</div>
            <div class="sidebar-item">
                <i class="fas fa-layer-group"></i>
                <span>业务管理</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-globe"></i>
                <span>网络管理</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-video"></i>
                <span>视频管理</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-building"></i>
                <span>机房管理</span>
            </div>
            <div class="sidebar-item active">
                <i class="fas fa-cubes"></i>
                <span>资产管理</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-user-cog"></i>
                <span>运维管理</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-database"></i>
                <span>CMDB</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-file-alt"></i>
                <span>日志管理</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-chart-pie"></i>
                <span>智能预测管理</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-cloud"></i>
                <span>云平台</span>
            </div>
            <div class="sidebar-divider"></div>
            <div class="sidebar-group-title">设置中心</div>
            <div class="sidebar-item">
                <i class="fas fa-cog"></i>
                <span>设置</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-plug"></i>
                <span>对接配置</span>
            </div>
        </div>

        <!-- 主内容区 -->
        <div class="main-content">
            <!-- 顶部导航栏 -->
            <header class="top-header">
<style>
/* 立即隐藏CMDB菜单项 - 防止闪烁 */
.nav-cmdb { display: none !important; }
.sidebar-item[data-page="CMDB"] { display: none !important; }
</style>
<script>
// 立即执行：尽早隐藏CMDB，防止闪烁
(function() {
    function hideCMDB() {
        var items = document.querySelectorAll('.sidebar-item');
        items.forEach(function(item) {
            var span = item.querySelector('span');
            if (span && span.textContent.trim() === 'CMDB') {
                item.style.display = 'none';
                item.setAttribute('data-hidden', 'true');
            }
        });
    }
    
    // 立即执行
    hideCMDB();
    
    // DOM Ready时再执行一次
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', hideCMDB);
    }
    
    // 额外保险：延迟执行确保覆盖所有情况
    setTimeout(hideCMDB, 10);
    setTimeout(hideCMDB, 100);
})();
</script>
                <div class="header-left">
                    <div class="breadcrumb">
                        <span class="breadcrumb-item">资产管理</span>
                    </div>
                </div>
                <div class="header-right">
                    <!-- 用户下拉菜单容器 -->
                    <div id="user-dropdown-container"></div>
                </div>
            </header>

            <!-- 页面内容 -->
            <div class="page-content">
                <!-- 主要内容区域 -->
                <div class="content-grid">
                    <!-- 左侧主要内容区域 -->
                    <div class="main-view">
                        <!-- 资产概览 -->
                        <div class="asset-overview">
                            <div class="overview-item">
                                <div class="overview-header">
                                    <h3>资产概览</h3>
                                </div>
                                <div class="overview-content">
                                    <div class="overview-gauge">
                                        <div class="gauge-container">
                                            <canvas id="assetGauge1"></canvas>
                                            <div class="gauge-value">
                                                <span class="value">0%</span>
                                            </div>
                                        </div>
                                        <div class="gauge-label">使用率</div>
                                    </div>
                                    <div class="overview-gauge">
                                        <div class="gauge-container">
                                            <canvas id="assetGauge2"></canvas>
                                            <div class="gauge-value">
                                                <span class="value">0%</span>
                                            </div>
                                        </div>
                                        <div class="gauge-label">闲置率</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 资产状态分布 -->
                        <div class="asset-status-chart">
                            <div class="chart-header">
                                <h3>资产状态分布</h3>
                            </div>
                            <div class="chart-content">
                                <canvas id="statusChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- 右侧信息面板 -->
                    <div class="info-panel">
                        <!-- 资产分类 -->
                        <div class="asset-categories">
                            <div class="categories-header">
                                <h3>资产分类</h3>
                            </div>
                            <div class="categories-content" id="categoriesContent">
                                <!-- 分类将通过JavaScript动态生成 -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 设备列表区域 -->
                <div class="device-list-section">
                    <div class="device-list-header">
                        <h3>设备列表</h3>
                        <div class="header-actions">
                            <button class="btn-add-asset" onclick="openAddAssetModal()">
                                <i class="fas fa-plus"></i> 新增资产
                            </button>
                            <select id="categoryFilter" class="filter-select">
                                <option value="">全部分类</option>
                                <!-- 选项将通过JavaScript动态加载 -->
                            </select>
                            <select id="statusFilter" class="filter-select">
                                <option value="">全部状态</option>
                                <option value="online">在线</option>
                                <option value="offline">离线</option>
                                <option value="maintenance">维护中</option>
                            </select>
                            <div class="search-box">
                                <input type="text" id="deviceSearchInput" placeholder="搜索设备名称或IP地址..." class="search-input">
                                <button onclick="searchDevices()" class="search-btn">
                                    <i class="fas fa-search"></i> 搜索
                                </button>
                                <button onclick="resetFilters()" class="reset-btn">
                                    <i class="fas fa-redo"></i> 重置
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="device-table-container">
                        <table class="device-list-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>资产编号</th>
                                    <th>资产名称</th>
                                    <th>设备名称</th>
                                    <th>分类</th>
                                    <th>制造商</th>
                                    <th>型号</th>
                                    <th>位置</th>
                                    <th>IP地址</th>
                                    <th>资产状态</th>
                                    <th>责任人</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="deviceListTableBody">
                                <!-- 设备数据将在这里动态加载 -->
                            </tbody>
                        </table>
                    </div>
                    <div class="pagination">
                        <button class="pagination-btn" onclick="previousPage()">
                            <i class="fas fa-chevron-left"></i> 上一页
                        </button>
                        <span class="pagination-info">
                            第 <span id="currentPage">1</span> 页 / 共 <span id="totalPages">1</span> 页 
                            (共 <span id="totalRecords">0</span> 条记录)
                        </span>
                        <button class="pagination-btn" onclick="nextPage()">
                            下一页 <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 资产详情模态框 -->
    <div id="assetDetailModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>资产详情</h3>
                <span class="modal-close" onclick="closeDetailModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="detail-container" id="assetDetailContent">
                    <!-- 详情内容将动态加载 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 资产新增模态框 -->
    <div id="assetAddModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>新增资产</h3>
                <span class="modal-close" onclick="closeAddModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="assetAddForm" class="edit-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>资产编号 <span class="required">*</span></label>
                            <input type="text" id="add_assetCode" name="assetCode" required>
                        </div>
                        <div class="form-group">
                            <label>资产名称 <span class="required">*</span></label>
                            <input type="text" id="add_assetName" name="assetName" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label>设备名称 <span class="optional-hint">(可选)</span></label>
                            <input type="text" id="add_deviceName" name="deviceName" placeholder="设备名称可以不填写">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>分类 <span class="required">*</span></label>
                            <select id="add_categoryId" name="categoryId" required>
                                <option value="">请选择分类</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>制造商</label>
                            <input type="text" id="add_manufacturer" name="manufacturer">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>型号</label>
                            <input type="text" id="add_model" name="model">
                        </div>
                        <div class="form-group">
                            <label>序列号</label>
                            <input type="text" id="add_serialNumber" name="serialNumber">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>IP地址</label>
                            <input type="text" id="add_ipAddress" name="ipAddress">
                        </div>
                        <div class="form-group">
                            <label>MAC地址</label>
                            <input type="text" id="add_macAddress" name="macAddress">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>位置</label>
                            <input type="text" id="add_location" name="location">
                        </div>
                        <div class="form-group">
                            <label>责任人</label>
                            <input type="text" id="add_owner" name="owner">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>资产状态</label>
                            <select id="add_assetStatus" name="assetStatus">
                                <option value="online">在线</option>
                                <option value="offline">离线</option>
                                <option value="maintenance">维护中</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <!-- 空位，保持布局 -->
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>采购日期</label>
                            <input type="date" id="add_purchaseDate" name="purchaseDate">
                        </div>
                        <div class="form-group">
                            <label>保修到期日期</label>
                            <input type="date" id="add_warrantyEndDate" name="warrantyEndDate">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label>备注</label>
                            <textarea id="add_remark" name="remark" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-cancel" onclick="closeAddModal()">取消</button>
                        <button type="submit" class="btn-submit">保存</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 资产编辑模态框 -->
    <div id="assetEditModal" class="modal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>编辑资产</h3>
                <span class="modal-close" onclick="closeEditModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="assetEditForm" class="edit-form">
                    <div class="form-row" id="edit_assetCodeNameRow">
                        <div class="form-group">
                            <label>资产编号 <span class="required">*</span></label>
                            <input type="text" id="edit_assetCode" name="assetCode" required>
                        </div>
                        <div class="form-group">
                            <label>资产名称 <span class="required">*</span></label>
                            <input type="text" id="edit_assetName" name="assetName" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label>设备名称</label>
                            <input type="text" id="edit_deviceName" name="deviceName" placeholder="在资产管理页面可选，设备页面必填">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>分类</label>
                            <select id="edit_categoryId" name="categoryId">
                                <option value="">请选择分类</option>
                            </select>
                        </div>
                        <div class="form-group" id="edit_manufacturerGroup">
                            <label>制造商</label>
                            <input type="text" id="edit_manufacturer" name="manufacturer">
                        </div>
                    </div>
                    
                    <div class="form-row" id="edit_modelSerialRow">
                        <div class="form-group">
                            <label>型号</label>
                            <input type="text" id="edit_model" name="model">
                        </div>
                        <div class="form-group">
                            <label>序列号</label>
                            <input type="text" id="edit_serialNumber" name="serialNumber">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>IP地址</label>
                            <input type="text" id="edit_ipAddress" name="ipAddress">
                        </div>
                        <div class="form-group">
                            <label>MAC地址</label>
                            <input type="text" id="edit_macAddress" name="macAddress">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>位置</label>
                            <input type="text" id="edit_location" name="location">
                        </div>
                        <div class="form-group">
                            <label>责任人</label>
                            <input type="text" id="edit_owner" name="owner">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label>资产状态</label>
                            <select id="edit_assetStatus" name="assetStatus">
                                <option value="online">在线</option>
                                <option value="offline">离线</option>
                                <option value="maintenance">维护中</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <!-- 空位，保持布局 -->
                        </div>
                    </div>
                    
                    <div class="form-row" id="edit_purchaseDateRow">
                        <div class="form-group">
                            <label>采购日期</label>
                            <input type="date" id="edit_purchaseDate" name="purchaseDate">
                        </div>
                        <div class="form-group">
                            <label>保修到期日期</label>
                            <input type="date" id="edit_warrantyEndDate" name="warrantyEndDate">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group full-width">
                            <label>备注</label>
                            <textarea id="edit_remark" name="remark" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <input type="hidden" id="edit_assetId" name="id">
                    
                    <div class="form-actions">
                        <button type="button" class="btn-cancel" onclick="closeEditModal()">取消</button>
                        <button type="submit" class="btn-submit">保存</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 引入用户下拉菜单加载器 -->
    <script src="js/user-dropdown-loader.js"></script>
    <script src="资产管理.js"></script>
</body>
</html>
