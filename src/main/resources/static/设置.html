<!DOCTYPE html>
<html lang="zh-CN">
<head>
<style>
/* ç«‹å³éšè—CMDBèœå•é¡¹ - é˜²æ­¢é—ªçƒ */
.nav-cmdb { display: none !important; }
.sidebar-item[data-page="CMDB"] { display: none !important; }
</style>
<script>
// ç«‹å³æ‰§è¡Œï¼šå°½æ—©éšè—CMDBï¼Œé˜²æ­¢é—ªçƒ
(function() {
    function hideCMDB() {
        var items = document.querySelectorAll('.sidebar-item');
        items.forEach(function(item) {
            var span = item.querySelector('span');
            if (span && span.textContent.trim() === 'CMDB') {
                item.style.display = 'none';
                item.setAttribute('data-hidden', 'true');
            }
        });
    }
    
    // ç«‹å³æ‰§è¡Œ
    hideCMDB();
    
    // DOM Readyæ—¶å†æ‰§è¡Œä¸€æ¬¡
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', hideCMDB);
    }
    
    // é¢å¤–ä¿é™©ï¼šå»¶è¿Ÿæ‰§è¡Œç¡®ä¿è¦†ç›–æ‰€æœ‰æƒ…å†µ
    setTimeout(hideCMDB, 10);
    setTimeout(hideCMDB, 100);
})();
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¾ç½® - äººå·¥æ™ºèƒ½è¿ç»´å¹³å°</title>
    <link rel="stylesheet" href="libs/fontawesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="è®¾ç½®.css">
</head>
<body>
    <div class="app-container">
        <!-- ä¾§è¾¹æ  -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h2>äººå·¥æ™ºèƒ½è¿ç»´å¹³å°</h2>
            </div>
            <div class="menuItem sidebar-item nav-overview">
                <i class="fas fa-tachometer-alt"></i>
                <span>æ€»è§ˆ</span>
            </div>
            <div class="sidebar-item sidebar-item nav-view">
                <i class="fas fa-eye"></i>
                <span>è§†å›¾</span>
            </div>
            <div class="sidebar-item sidebar-item nav-alert">
                <i class="fas fa-bell"></i>
                <span>å‘Šè­¦ä¸­å¿ƒ</span>
            </div>
            <div class="sidebar-item sidebar-item nav-device">
                <i class="fas fa-server"></i>
                <span>è®¾å¤‡ç®¡ç†</span>
            </div>
            <div class="sidebar-item sidebar-item nav-network">
                <i class="fas fa-network-wired"></i>
                <span>ç½‘ç»œæ‹“æ‰‘</span>
            </div>
            <div class="sidebar-item sidebar-item nav-report">
                <i class="fas fa-chart-line"></i>
                <span>ç»Ÿè®¡æŠ¥è¡¨</span>
            </div>
            <div class="sidebar-item sidebar-item nav-tools">
                <i class="fas fa-tools"></i>
                <span>è¿ç»´å·¥å…·</span>
            </div>
            <div class="sidebar-divider"></div>
            <div class="sidebar-group-title">æ‹“å±•ä¸­å¿ƒ</div>
            <div class="sidebar-item sidebar-item nav-business">
                <i class="fas fa-layer-group"></i>
                <span>ä¸šåŠ¡ç®¡ç†</span>
            </div>
            <div class="menuItem sidebar-item nav-network-mgmt">
                <i class="fas fa-globe"></i>
                <span>ç½‘ç»œç®¡ç†</span>
            </div>
            <div class="sidebar-item sidebar-item nav-video">
                <i class="fas fa-video"></i>
                <span>è§†é¢‘ç®¡ç†</span>
            </div>
            <div class="sidebar-item sidebar-item nav-room">
                <i class="fas fa-building"></i>
                <span>æœºæˆ¿ç®¡ç†</span>
            </div>
            <div class="sidebar-item sidebar-item nav-asset">
                <i class="fas fa-cubes"></i>
                <span>èµ„äº§ç®¡ç†</span>
            </div>
            <div class="sidebar-item sidebar-item nav-operation">
                <i class="fas fa-user-cog"></i>
                <span>è¿ç»´ç®¡ç†</span>
            </div>
            <div class="sidebar-item sidebar-item nav-cmdb">
                <i class="fas fa-database"></i>
                <span>CMDB</span>
            </div>
            <div class="sidebar-item sidebar-item nav-log">
                <i class="fas fa-file-alt"></i>
                <span>æ—¥å¿—ç®¡ç†</span>
            </div>
            <div class="menuItem sidebar-item nav-prediction">
                <i class="fas fa-chart-pie"></i>
                <span>æ™ºèƒ½é¢„æµ‹ç®¡ç†</span>
            </div>
            <div class="menuItem sidebar-item nav-cloud">
                <i class="fas fa-cloud"></i>
                <span>äº‘å¹³å°</span>
            </div>
            <div class="sidebar-divider"></div>
            <div class="sidebar-group-title">è®¾ç½®ä¸­å¿ƒ</div>
            <div class="menuItem sidebar-item nav-settings active">
                <i class="fas fa-cog"></i>
                <span>è®¾ç½®</span>
            </div>
            <div class="menuItem sidebar-item nav-docking">
                <i class="fas fa-plug"></i>
                <span>å¯¹æ¥é…ç½®</span>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-content">
            <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
            <header class="top-header">
<style>
/* ç«‹å³éšè—CMDBèœå•é¡¹ - é˜²æ­¢é—ªçƒ */
.nav-cmdb { display: none !important; }
.sidebar-item[data-page="CMDB"] { display: none !important; }
</style>
<script>
// ç«‹å³æ‰§è¡Œï¼šå°½æ—©éšè—CMDBï¼Œé˜²æ­¢é—ªçƒ
(function() {
    function hideCMDB() {
        var items = document.querySelectorAll('.sidebar-item');
        items.forEach(function(item) {
            var span = item.querySelector('span');
            if (span && span.textContent.trim() === 'CMDB') {
                item.style.display = 'none';
                item.setAttribute('data-hidden', 'true');
            }
        });
    }
    
    // ç«‹å³æ‰§è¡Œ
    hideCMDB();
    
    // DOM Readyæ—¶å†æ‰§è¡Œä¸€æ¬¡
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', hideCMDB);
    }
    
    // é¢å¤–ä¿é™©ï¼šå»¶è¿Ÿæ‰§è¡Œç¡®ä¿è¦†ç›–æ‰€æœ‰æƒ…å†µ
    setTimeout(hideCMDB, 10);
    setTimeout(hideCMDB, 100);
})();
</script>
                <div class="header-left">
                    <div class="breadcrumb">
                        <span class="breadcrumb-item">è®¾ç½®</span>
                    </div>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="æœç´¢ç”¨æˆ·..." id="searchInput">
                    </div>
                    <div class="user-menu">
                        <div class="user-avatar">
                            <img id="settingsUserAvatar" src="1.png" alt="ç”¨æˆ·å¤´åƒ">
                        </div>
                    </div>
                </div>
            </header>

            <!-- é¡µé¢å†…å®¹ -->
            <div class="page-content">
                <!-- è®¾ç½®å†…å®¹åŒºåŸŸ -->
                <div class="settings-container">
                    <!-- å·¦ä¾§è®¾ç½®åˆ†ç±»æ ‘ -->
                    <div class="settings-tree">
                        <div class="tree-header">
                            <h3>è®¾ç½®</h3>
                        </div>
                        <div class="tree-content">
                            <div class="tree-node">
                                <div class="node-item selected">
                                    <i class="fas fa-user node-icon"></i>
                                    <span class="node-text">ç”¨æˆ·</span>
                                </div>
                            </div>
                            <div class="tree-node">
                                <div class="node-item">
                                    <i class="fas fa-users node-icon"></i>
                                    <span class="node-text">ç”¨æˆ·ç»„é…ç½®</span>
                                </div>
                            </div>
                            <div class="tree-node">
                                <div class="node-item">
                                    <i class="fas fa-users-cog node-icon"></i>
                                    <span class="node-text">ç”¨æˆ·ç»„</span>
                                </div>
                            </div>
                            <div class="tree-node">
                                <div class="node-item">
                                    <i class="fas fa-user-shield node-icon"></i>
                                    <span class="node-text">è§’è‰²</span>
                                </div>
                            </div>
                            <div class="tree-node">
                                <div class="node-item">
                                    <i class="fas fa-cogs node-icon"></i>
                                    <span class="node-text">ç³»ç»Ÿé…ç½®</span>
                                </div>
                            </div>
                            <div class="tree-node">
                                <div class="node-item">
                                    <i class="fas fa-user-times node-icon"></i>
                                    <span class="node-text">å·²åˆ é™¤çš„ç”¨æˆ·</span>
                                </div>
                            </div>
                            <div class="tree-node">
                                <div class="node-item">
                                    <i class="fas fa-folder node-icon"></i>
                                    <span class="node-text">æ¡£æ¡ˆç®¡ç†</span>
                                </div>
                            </div>
                            <div class="tree-node">
                                <div class="node-item">
                                    <i class="fas fa-clipboard-list node-icon"></i>
                                    <span class="node-text">æ—¥å¿—ç®¡ç†</span>
                                </div>
                            </div>
                            <div class="tree-node">
                                <div class="node-item">
                                    <i class="fas fa-puzzle-piece node-icon"></i>
                                    <span class="node-text">åº”ç”¨é…ç½®</span>
                                </div>
                            </div>
                            <div class="tree-node">
                                <div class="node-item">
                                    <i class="fas fa-users-slash node-icon"></i>
                                    <span class="node-text">å·²åˆ é™¤çš„ç”¨æˆ·ç»„</span>
                                </div>
                            </div>
                            <div class="tree-node">
                                <div class="node-item">
                                    <i class="fas fa-sliders-h node-icon"></i>
                                    <span class="node-text">è®¾ç½®</span>
                                </div>
                            </div>
                            <div class="tree-node">
                                <div class="node-item" data-setting="detection-template">
                                    <i class="fas fa-clipboard-check node-icon"></i>
                                    <span class="node-text">æ£€æµ‹æ¨¡æ¿è®¾ç½®</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å³ä¾§ä¸»è¦å†…å®¹åŒºåŸŸ -->
                    <div class="settings-main">
                        <!-- å·¥å…·æ  -->
                        <div class="toolbar">
                            <div class="toolbar-left">
                                <div class="nav-tabs">
                                    <button class="nav-tab active" data-tab="users">ç”¨æˆ·</button>
                                    <button class="nav-tab" data-tab="add">æ–°å¢</button>
                                    <button class="nav-tab" data-tab="edit" style="display: none;">ç¼–è¾‘</button>
                                    <button class="nav-tab" data-tab="import">å¯¼å…¥</button>
                                </div>
                            </div>
                            <div class="toolbar-right">
                                <div class="search-container">
                                    <input type="text" class="search-input" placeholder="è¾“å…¥å…³é”®å­—æœç´¢ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·åã€é‚®ç®±ç­‰" id="userSearchInput">
                                    <button class="search-btn">
                                        <i class="fas fa-search"></i>
                                    </button>
                                    <button class="refresh-btn">
                                        <i class="fas fa-sync"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- è®¾ç½®å†…å®¹ -->
                        <div class="settings-content">
                            <!-- ç”¨æˆ·ç®¡ç†è¡¨æ ¼ -->
                            <div class="user-management" id="usersTab">
                                <div class="table-container">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>ç™»å½•åç§°/æ˜¾ç¤ºåç§°</th>
                                                <th>é‚®ç®±</th>
                                                <th>æœ€åä¸€æ¬¡ç™»å½•</th>
                                                <th>æœ€åä¿®æ”¹æ—¶é—´</th>
                                                <th>çŠ¶æ€</th>
                                                <th>æ“ä½œ</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <div class="user-info">
                                                        <div class="user-name">admin/ç®¡ç†å‘˜</div>
                                                    </div>
                                                </td>
                                                <td>-</td>
                                                <td>2024-07-29 15:17:50</td>
                                                <td>2024-01-09 16:21:40</td>
                                                <td>
                                                    <span class="status-badge active">å¯ç”¨</span>
                                                </td>
                                                <td>
                                                    <div class="action-buttons">
                                                        <button class="btn-edit" title="ç¼–è¾‘">
                                                            <i class="fas fa-edit"></i>
                                                        </button>
                                                        <button class="btn-delete" title="åˆ é™¤">
                                                            <i class="fas fa-trash"></i>
                                                        </button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    
                                    <!-- åˆ†é¡µ -->
                                    <div class="pagination">
                                        <div class="pagination-info">
                                            å…±è®¡ 1 æ¡è®°å½•ï¼Œå…± 1 é¡µï¼Œæ¯é¡µ 20 æ¡ï¼Œå½“å‰ç¬¬ 1 é¡µ
                                        </div>
                                        <div class="pagination-controls">
                                            <button class="page-btn" disabled>
                                                <i class="fas fa-angle-left"></i>
                                            </button>
                                            <span class="page-number active">1</span>
                                            <button class="page-btn" disabled>
                                                <i class="fas fa-angle-right"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- æ–°å¢ç”¨æˆ·è¡¨å• -->
                            <div class="add-user-form" id="addTab" style="display: none;">
                                <div class="form-container">
                                    <h3>æ–°å¢ç”¨æˆ·</h3>
                                    <form class="user-form" id="addUserForm">
                                        <input type="hidden" id="add-userId" name="id">
                                        
                                        <!-- å¤´åƒä¸Šä¼  -->
                                        <div class="form-group avatar-upload-group">
                                            <label>å¤´åƒ</label>
                                            <div class="avatar-upload-container">
                                                <div class="avatar-preview" id="add-avatarPreview">
                                                    <img src="https://via.placeholder.com/100" alt="å¤´åƒé¢„è§ˆ" id="add-avatarImage">
                                                    <div class="avatar-upload-overlay">
                                                        <i class="fas fa-camera"></i>
                                                        <span>ä¸Šä¼ å¤´åƒ</span>
                                                    </div>
                                                </div>
                                                <input type="file" id="add-avatarInput" accept="image/*" style="display: none;">
                                                <input type="hidden" id="add-avatarUrl" name="avatar">
                                                <div class="avatar-tips">
                                                    <p>æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 2MB</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="add-username">ç”¨æˆ·å <span class="required">*</span></label>
                                            <input type="text" id="add-username" name="username" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="add-realName">çœŸå®å§“å <span class="required">*</span></label>
                                            <input type="text" id="add-realName" name="realName" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="add-email">é‚®ç®±</label>
                                            <input type="email" id="add-email" name="email">
                                        </div>
                                        <div class="form-group">
                                            <label for="add-phone">æ‰‹æœºå·</label>
                                            <input type="tel" id="add-phone" name="phone">
                                        </div>
                                        <div class="form-group">
                                            <label for="add-password">å¯†ç  <span class="required">*</span></label>
                                            <input type="password" id="add-password" name="password" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="add-confirmPassword">ç¡®è®¤å¯†ç  <span class="required">*</span></label>
                                            <input type="password" id="add-confirmPassword" name="confirmPassword" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="add-role">è§’è‰²</label>
                                            <select id="add-role" name="role">
                                                <option value="user">æ™®é€šç”¨æˆ·</option>
                                                <option value="admin">ç®¡ç†å‘˜</option>
                                            </select>
                                        </div>
                                        <div class="form-group">
                                            <label for="add-status">çŠ¶æ€</label>
                                            <select id="add-status" name="status">
                                                <option value="1">å¯ç”¨</option>
                                                <option value="0">ç¦ç”¨</option>
                                            </select>
                                        </div>
                                        <div class="form-actions">
                                            <button type="submit" class="btn-primary">ä¿å­˜</button>
                                            <button type="button" class="btn-secondary" onclick="switchTab('users')">å–æ¶ˆ</button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <!-- ç¼–è¾‘ç”¨æˆ·è¡¨å• -->
                            <div class="edit-user-form" id="editTab" style="display: none;">
                                <div class="form-container">
                                    <h3>ç¼–è¾‘ç”¨æˆ·</h3>
                                    <form class="user-form" id="editUserForm">
                                        <input type="hidden" id="edit-userId" name="id">
                                        
                                        <!-- å¤´åƒä¸Šä¼  -->
                                        <div class="form-group avatar-upload-group">
                                            <label>å¤´åƒ</label>
                                            <div class="avatar-upload-container">
                                                <div class="avatar-preview" id="edit-avatarPreview">
                                                    <img src="https://via.placeholder.com/100" alt="å¤´åƒé¢„è§ˆ" id="edit-avatarImage">
                                                    <div class="avatar-upload-overlay">
                                                        <i class="fas fa-camera"></i>
                                                        <span>ä¸Šä¼ å¤´åƒ</span>
                                                    </div>
                                                </div>
                                                <input type="file" id="edit-avatarInput" accept="image/*" style="display: none;">
                                                <input type="hidden" id="edit-avatarUrl" name="avatar">
                                                <div class="avatar-tips">
                                                    <p>æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 2MB</p>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label for="edit-username">ç”¨æˆ·å <span class="required">*</span></label>
                                            <input type="text" id="edit-username" name="username" required readonly>
                                        </div>
                                        <div class="form-group">
                                            <label for="edit-realName">çœŸå®å§“å <span class="required">*</span></label>
                                            <input type="text" id="edit-realName" name="realName" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="edit-email">é‚®ç®±</label>
                                            <input type="email" id="edit-email" name="email">
                                        </div>
                                        <div class="form-group">
                                            <label for="edit-phone">æ‰‹æœºå·</label>
                                            <input type="tel" id="edit-phone" name="phone">
                                        </div>
                                        <div class="form-group">
                                            <label>ä¿®æ”¹å¯†ç ï¼ˆç•™ç©ºåˆ™ä¸ä¿®æ”¹ï¼‰</label>
                                            <input type="password" id="edit-password" name="password" placeholder="ç•™ç©ºåˆ™ä¸ä¿®æ”¹å¯†ç ">
                                        </div>
                                        <div class="form-group">
                                            <label for="edit-confirmPassword">ç¡®è®¤æ–°å¯†ç </label>
                                            <input type="password" id="edit-confirmPassword" name="confirmPassword" placeholder="ç¡®è®¤æ–°å¯†ç ">
                                        </div>
                                        <div class="form-actions">
                                            <button type="submit" class="btn-primary">ä¿å­˜ä¿®æ”¹</button>
                                            <button type="button" class="btn-secondary" onclick="switchTab('users')">å–æ¶ˆ</button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <!-- å¯¼å…¥ç”¨æˆ· -->
                            <div class="import-user" id="importTab" style="display: none;">
                                <div class="import-container">
                                    <h3>å¯¼å…¥ç”¨æˆ·</h3>
                                    <div class="import-area">
                                        <div class="upload-zone">
                                            <i class="fas fa-cloud-upload-alt"></i>
                                            <p>æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„æˆ–ç‚¹å‡»ä¸Šä¼ </p>
                                            <input type="file" id="fileInput" accept=".csv,.xlsx,.xls" style="display: none;">
                                            <button class="upload-btn">é€‰æ‹©æ–‡ä»¶</button>
                                        </div>
                                        <div class="import-tips">
                                            <h4>å¯¼å…¥è¯´æ˜ï¼š</h4>
                                            <ul>
                                                <li>æ”¯æŒ CSVã€Excel æ ¼å¼æ–‡ä»¶</li>
                                                <li>æ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 10MB</li>
                                                <li>å¿…é¡»åŒ…å«ï¼šç”¨æˆ·åã€æ˜¾ç¤ºåç§°åˆ—</li>
                                                <li>å¯é€‰åŒ…å«ï¼šé‚®ç®±ã€å¯†ç åˆ—</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- æ£€æµ‹æ¨¡æ¿è®¾ç½® -->
                            <div class="detection-template-management" id="detectionTemplateTab" style="display: none;">
                                <div class="template-header">
                                    <div class="header-left">
                                        <h3>æ£€æµ‹æ¨¡æ¿è®¾ç½®</h3>
                                        <div class="template-stats">
                                            <span class="stat-item">å…¨éƒ¨ <span class="stat-count" id="totalTemplates">0</span></span>
                                        </div>
                                    </div>
                                    <div class="header-right">
                                        <div class="search-container">
                                            <input type="text" class="search-input" placeholder="è¾“å…¥æ¨¡æ¿åç§°" id="templateSearchInput">
                                            <button class="search-btn" onclick="searchTemplates()">
                                                <i class="fas fa-search"></i>
                                            </button>
                                        </div>
                                        <button class="btn-primary add-template-btn" onclick="showAddTemplateModal()">
                                            <i class="fas fa-plus"></i>
                                            æ·»åŠ æ£€æµ‹æ¨¡æ¿
                                        </button>
                                    </div>
                                </div>

                                <div class="template-content">
                                    <div class="table-container">
                                        <table class="detection-template-table">
                                            <thead>
                                                <tr>
                                                    <th>æ¨¡æ¿åç§°</th>
                                                    <th>æ£€æµ‹ç±»å‹</th>
                                                    <th>é˜ˆå€¼è®¾ç½®</th>
                                                    <th>æ›´æ–°æ—¶é—´</th>
                                                    <th>çŠ¶æ€</th>
                                                    <th>æ“ä½œ</th>
                                                </tr>
                                            </thead>
                                            <tbody id="templateTableBody">
                                                <!-- æ¨¡æ¿æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                                                <tr class="empty-row">
                                                    <td colspan="6">
                                                        <div class="empty-state">
                                                            <i class="fas fa-clipboard-list"></i>
                                                            <p>æš‚æ— æ£€æµ‹æ¨¡æ¿</p>
                                                            <button class="btn-primary" onclick="showAddTemplateModal()">æ·»åŠ ç¬¬ä¸€ä¸ªæ¨¡æ¿</button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- åˆ†é¡µ -->
                                    <div class="pagination" id="templatePagination" style="display: none;">
                                        <div class="pagination-info">
                                            <span id="templatePaginationInfo">å…±è®¡ 0 æ¡è®°å½•ï¼Œå…± 0 é¡µï¼Œæ¯é¡µ 20 æ¡ï¼Œå½“å‰ç¬¬ 1 é¡µ</span>
                                        </div>
                                        <div class="pagination-controls">
                                            <button class="page-btn" id="templatePrevBtn" onclick="changeTemplatePage(-1)">
                                                <i class="fas fa-angle-left"></i>
                                            </button>
                                            <span class="page-numbers" id="templatePageNumbers"></span>
                                            <button class="page-btn" id="templateNextBtn" onclick="changeTemplatePage(1)">
                                                <i class="fas fa-angle-right"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¯†ç éªŒè¯å¼¹çª— -->
    <div class="password-modal" id="passwordModal" style="display: none;">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>éªŒè¯ç®¡ç†å‘˜å¯†ç </h3>
                <button class="modal-close" onclick="closePasswordModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-tip">æ–°å¢ç”¨æˆ·éœ€è¦ç®¡ç†å‘˜å¯†ç éªŒè¯</p>
                <div class="form-group">
                    <label for="adminPassword">ç®¡ç†å‘˜å¯†ç  <span class="required">*</span></label>
                    <input type="password" id="adminPassword" placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜å¯†ç " autofocus>
                    <span class="error-message" id="passwordError" style="display: none;"></span>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closePasswordModal()">å–æ¶ˆ</button>
                <button class="btn-primary" onclick="verifyPassword()">ç¡®è®¤</button>
            </div>
        </div>
    </div>

    <!-- æ£€æµ‹æ¨¡æ¿å¼¹çª— -->
    <div class="template-modal" id="templateModal" style="display: none;">
        <div class="modal-overlay" onclick="closeTemplateModal()"></div>
        <div class="modal-content template-modal-content">
            <div class="modal-header">
                <h3 id="templateModalTitle">æ·»åŠ æ£€æµ‹æ¨¡æ¿</h3>
                <button class="modal-close" onclick="closeTemplateModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form class="template-form" id="templateForm">
                    <input type="hidden" id="templateId" name="id">
                    
                    <div class="form-group">
                        <label for="templateName">æ¨¡æ¿åç§° <span class="required">*</span></label>
                        <input type="text" id="templateName" name="templateName" placeholder="è¯·è¾“å…¥æ¨¡æ¿åç§°" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="detectionType">ç›‘æ§ç±»å‹ <span class="required">*</span></label>
                        <select id="detectionType" name="detectionType" required>
                            <option value="">è¯·é€‰æ‹©ç›‘æ§ç±»å‹</option>
                            <option value="cpu">CPUç›‘æ§</option>
                            <option value="memory">å†…å­˜ç›‘æ§</option>
                            <option value="disk">ç£ç›˜ç›‘æ§</option>
                            <option value="network">ç½‘ç»œç›‘æ§</option>
                            <option value="temperature">æ¸©åº¦ç›‘æ§</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="warningThreshold">è­¦å‘Šé˜ˆå€¼ <span class="required">*</span></label>
                        <div class="threshold-input">
                            <input type="number" id="warningThreshold" name="warningThreshold" placeholder="0" min="0" max="100" required>
                            <span class="threshold-unit">%</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="criticalThreshold">ä¸¥é‡é˜ˆå€¼ <span class="required">*</span></label>
                        <div class="threshold-input">
                            <input type="number" id="criticalThreshold" name="criticalThreshold" placeholder="0" min="0" max="100" required>
                            <span class="threshold-unit">%</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="checkInterval">æ£€æµ‹é—´éš” <span class="required">*</span></label>
                        <div class="interval-input">
                            <input type="number" id="checkInterval" name="checkInterval" placeholder="5" min="1" required>
                            <select id="intervalUnit" name="intervalUnit">
                                <option value="minutes">åˆ†é’Ÿ</option>
                                <option value="hours">å°æ—¶</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="templateDescription">æè¿°</label>
                        <textarea id="templateDescription" name="description" placeholder="è¯·è¾“å…¥æ¨¡æ¿æè¿°" rows="3"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="templateStatus">çŠ¶æ€</label>
                        <select id="templateStatus" name="status">
                            <option value="1">å¯ç”¨</option>
                            <option value="0">ç¦ç”¨</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeTemplateModal()">å–æ¶ˆ</button>
                <button class="btn-primary" onclick="saveTemplate()">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <script src="è®¾ç½®.js"></script>
    
    <!-- ç«‹å³æ‰§è¡Œçš„å¤´åƒä¿®å¤è„šæœ¬ -->
    <script>
    (function() {
        'use strict';
        
        function fixSettingsAvatarImmediate() {
            console.log('ğŸ”§ ç«‹å³ä¿®å¤è®¾ç½®é¡µé¢å¤´åƒ');
            
            const avatarElement = document.getElementById('settingsUserAvatar');
            if (!avatarElement) {
                console.log('âŒ æœªæ‰¾åˆ°å¤´åƒå…ƒç´  settingsUserAvatar');
                return;
            }
            
            // ä¿®å¤URLæ ¼å¼
            let userAvatar = localStorage.getItem('userAvatar');
            if (userAvatar && userAvatar.startsWith('/upload/')) {
                userAvatar = userAvatar.replace('/upload/', '/api/upload/');
                localStorage.setItem('userAvatar', userAvatar);
                console.log('âœ… ä¿®å¤å¤´åƒURLæ ¼å¼:', userAvatar);
            }
            
            // è®¾ç½®å¤´åƒ
            if (userAvatar && userAvatar !== 'null' && userAvatar !== '') {
                avatarElement.src = userAvatar;
                console.log('âœ… è®¾ç½®é¡µé¢å¤´åƒå·²æ›´æ–°:', userAvatar);
            } else {
                avatarElement.src = '1.png';
                console.log('âœ… ä½¿ç”¨é»˜è®¤å¤´åƒ');
            }
        }
        
        // ç«‹å³å°è¯•ä¿®å¤
        fixSettingsAvatarImmediate();
        
        // DOMåŠ è½½å®Œæˆåå†æ¬¡å°è¯•
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', fixSettingsAvatarImmediate);
        }
        
        // å»¶è¿Ÿå†æ¬¡å°è¯•
        setTimeout(fixSettingsAvatarImmediate, 500);
        setTimeout(fixSettingsAvatarImmediate, 1500);
        
        // ç›‘å¬å¤´åƒæ›´æ–°äº‹ä»¶
        window.addEventListener('avatarUpdated', function(e) {
            const avatarElement = document.getElementById('settingsUserAvatar');
            if (avatarElement && e.detail && e.detail.avatar) {
                avatarElement.src = e.detail.avatar;
                console.log('âœ… è®¾ç½®é¡µé¢å¤´åƒäº‹ä»¶æ›´æ–°:', e.detail.avatar);
            }
        });
        
        console.log('ğŸ¯ è®¾ç½®é¡µé¢å¤´åƒä¿®å¤è„šæœ¬å·²åŠ è½½');
    })();
    </script>
</body>
</html>
